version: "3"
services:
  elasticsearch:
    image: localhost/elasticsearch:v1
    build: ./elasticsearch
    container_name: elasticsearch
    volumes:
      - "/var/data/elasticsearch:/var/lib/elasticsearch"
    ports:
      - "9200:9200"
    restart: unless-stopped
  kibana:
    image: localhost/kibana:v1
    build: ./kibana
    container_name: kibana
    links:
      - elasticsearch
    volumes:
      - "/var/data/kibana:/var/lib/kibana"
    ports:
      - "5601:5601"
    restart: unless-stopped
  nginx:
    image: localhost/nginx:v2
    build: ./nginx
    container_name: nginx
    links:
      - kibana
    ports:
      - "5681:5681"
    restart: unless-stopped
